ICMP基础知识
1. 概述
ICMP（互联网控制消息协议）：是一种网络层协议，主要用于发送控制消息和错误报告。它是TCP/IP协议族的重要组成部分。
2. 功能
错误报告：当网络设备无法传输数据包时，ICMP会发送错误消息，例如目的地不可达。
网络诊断：用于网络状态监测和故障排除，最常用的工具是ping和traceroute。
3. ICMP消息类型
回显请求（Echo Request）：由ping命令发送，用于检查目标主机是否可达。
回显应答（Echo Reply）：响应回显请求，确认目标主机可达。
目的地不可达（Destination Unreachable）：指示数据包无法到达目的地，返回给发送方。
时间超过（Time Exceeded）：用于指示数据包在路由中存活时间耗尽。
4. ICMP报文结构
类型：指示ICMP消息的类型（如回显请求、错误消息）。
代码：提供更详细的信息，具体说明错误类型。
校验和：用于错误检测，确保消息的完整性。
标识符和序列号：用于匹配请求和响应，主要用于回显请求。
5. 安全性
ICMP攻击：
Ping洪水攻击：使用大量ICMP回显请求使目标主机过载。
ICMP重定向：攻击者可以利用ICMP重定向消息进行流量劫持。
防护措施：使用防火墙限制ICMP流量，防止不必要的访问和攻击。
6. 渗透测试中的ICMP
网络探测：使用ping和traceroute收集网络拓扑信息。
主机存活检测：判断目标主机是否在线。
信息收集：通过ICMP消息识别网络设备和服务。
总结
ICMP是网络通信中重要的控制协议，理解其功能、消息类型和潜在安全风险，对于网络管理和安全评估至关重要。